<mujoco model="geoms_fitting_aabb">
  <compiler fitaabb="true"/>
  <default>
    <default class="base">
      <default class="visual">
        <geom group="2" type="mesh"/>
      </default>
    </default>
  </default>

  <asset>
      <!-- When fitting a mesh, an error occurs if the capsule's XYZ bounding box coordinates are uniform. -->
      <!-- To avoid this, we apply scaling to deliberately transform it into an uneven bounding box. -->
      <mesh name="complex_cube" file="assets/complex_cube.obj" scale="1.3 1.0 1.0"/>
      <mesh name="rectangle_x" file="assets/box.obj" scale="1.2 0.3 0.2"/>
      <mesh name="rectangle_y" file="assets/box.obj" scale="0.3 1.2 0.2"/>
      <mesh name="rectangle_z" file="assets/box.obj" scale="0.3 0.2 1.2"/>
  </asset>

  <worldbody>
    <!-- If the body name is not specified. -->
    <body childclass="base" pos="0 0 -2">
      <geom class="visual" type="mesh" mesh="complex_cube"/>
      <geom type="box" mesh="complex_cube" rgba="1 0 1 0.3"/>
    </body>

    <!-- When specifying a geom name. -->
    <body name="use_geom_name" childclass="base" pos="2 0 -2">
      <geom name="geom_complex_cube_visual" class="visual" type="mesh" mesh="complex_cube"/>
      <geom name="geom_complex_cube" type="box" mesh="complex_cube" rgba="1 0 1 0.3"/>
    </body>

    <!-- Fitting with geometric primitives. If transform is not specified. -->
    <body name="fitting_box_no_transform" childclass="base" pos="0 0 0">
      <geom name="box_visual" class="visual" type="mesh" mesh="complex_cube"/>
      <geom name="box" type="box" mesh="complex_cube" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_sphere_no_transform" childclass="base" pos="2 0 0">
      <geom name="sphere_visual" class="visual" type="mesh" mesh="complex_cube"/>
      <geom name="sphere" type="sphere" mesh="complex_cube" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_cylinder_no_transform" childclass="base" pos="4 0 0">
      <geom name="cylinder_visual" class="visual" type="mesh" mesh="complex_cube"/>
      <geom name="cylinder" type="cylinder" mesh="complex_cube" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_capsule_no_transform" childclass="base" pos="6 0 0">
      <geom name="capsule_visual" class="visual" type="mesh" mesh="complex_cube"/>
      <geom name="capsule" type="capsule" mesh="complex_cube" rgba="1 0 1 0.3"/>
    </body>

    <!-- Unsupported geometric primitive. -->
    <body name="fitting_ellipsoid_no_transform" childclass="base" pos="8 0 0">
      <geom name="ellipsoid_visual" class="visual" type="mesh" mesh="complex_cube"/>
      <geom name="ellipsoid" type="ellipsoid" mesh="complex_cube" rgba="1 0 1 0.3"/>
    </body>

    <!-- Fitting with geometric primitives. Specify the transform. -->
    <body name="fitting_box_with_transform" childclass="base" pos="0 0 2">
      <geom name="box_visual_wth_transform" class="visual" type="mesh" mesh="complex_cube" pos="0.1 0.0 -0.5" quat="0.6964 0.6964 -0.1228 -0.1228"/>
      <geom name="box_with_transform" type="box" mesh="complex_cube" pos="0.1 0.0 -0.5" quat="0.6964 0.6964 -0.1228 -0.1228" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_sphere_with_transform" childclass="base" pos="2 0 2">
      <geom name="sphere_visual_with_transform" class="visual" type="mesh" mesh="complex_cube" pos="0.1 0.0 -0.5" quat="0.6964 0.6964 -0.1228 -0.1228"/>
      <geom name="sphere_with_transform" type="sphere" mesh="complex_cube" pos="0.1 0.0 -0.5" quat="0.6964 0.6964 -0.1228 -0.1228" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_cylinder_with_transform" childclass="base" pos="4 0 2">
      <geom name="cylinder_visual_with_transform" class="visual" type="mesh" mesh="complex_cube" pos="0.1 0.0 -0.5" quat="0.6964 0.6964 -0.1228 -0.1228"/>
      <geom name="cylinder_with_transform" type="cylinder" mesh="complex_cube" pos="0.1 0.0 -0.5" quat="0.6964 0.6964 -0.1228 -0.1228" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_capsule_with_transform" childclass="base" pos="6 0 2">
      <geom name="capsule_visual_with_transform" class="visual" type="mesh" mesh="complex_cube" pos="0.1 0.0 -0.5" quat="0.6964 0.6964 -0.1228 -0.1228"/>
      <geom name="capsule_with_transform" type="capsule" mesh="complex_cube" pos="0.1 0.0 -0.5" quat="0.6964 0.6964 -0.1228 -0.1228" rgba="1 0 1 0.3"/>
    </body>

    <!-- Fitting with geometric primitives. Specify the fitscale. -->
    <body name="fitting_box_with_fitscale" childclass="base" pos="0 0 4">
      <geom name="box_visual_with_fitscale" class="visual" type="mesh" mesh="complex_cube" quat="0.6964 0.6964 -0.1228 -0.1228"/>
      <geom name="box_with_fitscale" type="box" mesh="complex_cube" quat="0.6964 0.6964 -0.1228 -0.1228" fitscale="1.2" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_sphere_with_fitscale" childclass="base" pos="2 0 4">
      <geom name="sphere_visual_with_fitscale" class="visual" type="mesh" mesh="complex_cube" quat="0.6964 0.6964 -0.1228 -0.1228"/>
      <geom name="sphere_with_fitscale" type="sphere" mesh="complex_cube" quat="0.6964 0.6964 -0.1228 -0.1228" fitscale="1.2" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_cylinder_with_fitscale" childclass="base" pos="4 0 4">
      <geom name="cylinder_visual_with_fitscale" class="visual" type="mesh" mesh="complex_cube" quat="0.6964 0.6964 -0.1228 -0.1228"/>
      <geom name="cylinder_with_fitscale" type="cylinder" mesh="complex_cube" quat="0.6964 0.6964 -0.1228 -0.1228" fitscale="1.2" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_capsule_with_fitscale" childclass="base" pos="6 0 4">
      <geom name="capsule_visual_with_fitscale" class="visual" type="mesh" mesh="complex_cube" quat="0.6964 0.6964 -0.1228 -0.1228"/>
      <geom name="capsule_with_fitscale" type="capsule" mesh="complex_cube" quat="0.6964 0.6964 -0.1228 -0.1228" fitscale="1.2" rgba="1 0 1 0.3"/>
    </body>

    <!-- A box scaled non-uniformly in XYZ. -->
    <body name="fitting_box_scaled_x" childclass="base" pos="0 0 6">
      <geom name="box_visual_scaled_x" class="visual" type="mesh" mesh="rectangle_x"/>
      <geom name="box_scaled_x" type="box" mesh="rectangle_x" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_box_scaled_y" childclass="base" pos="0 0 6">
      <geom name="box_visual_scaled_y" class="visual" type="mesh" mesh="rectangle_y"/>
      <geom name="box_scaled_y" type="box" mesh="rectangle_y" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_box_scaled_z" childclass="base" pos="0 0 6">
      <geom name="box_visual_scaled_z" class="visual" type="mesh" mesh="rectangle_z"/>
      <geom name="box_scaled_z" type="box" mesh="rectangle_z" rgba="1 0 1 0.3"/>
    </body>

    <body name="fitting_sphere_scaled_x" childclass="base" pos="2 0 6">
      <geom name="sphere_visual_scaled_x" class="visual" type="mesh" mesh="rectangle_x"/>
      <geom name="sphere_scaled_x" type="sphere" mesh="rectangle_x" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_sphere_scaled_y" childclass="base" pos="2 0 6">
      <geom name="sphere_visual_scaled_y" class="visual" type="mesh" mesh="rectangle_y"/>
      <geom name="sphere_scaled_y" type="sphere" mesh="rectangle_y" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_sphere_scaled_z" childclass="base" pos="2 0 6">
      <geom name="sphere_visual_scaled_z" class="visual" type="mesh" mesh="rectangle_z"/>
      <geom name="sphere_scaled_z" type="sphere" mesh="rectangle_z" rgba="1 0 1 0.3"/>
    </body>

    <body name="fitting_cylinder_scaled_x" childclass="base" pos="4 0 6">
      <geom name="cylinder_visual_scaled_x" class="visual" type="mesh" mesh="rectangle_x"/>
      <geom name="cylinder_scaled_x" type="cylinder" mesh="rectangle_x" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_cylinder_scaled_y" childclass="base" pos="4 0 6">
      <geom name="cylinder_visual_scaled_y" class="visual" type="mesh" mesh="rectangle_y"/>
      <geom name="cylinder_scaled_y" type="cylinder" mesh="rectangle_y" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_cylinder_scaled_z" childclass="base" pos="4 0 6">
      <geom name="cylinder_visual_scaled_z" class="visual" type="mesh" mesh="rectangle_z"/>
      <geom name="cylinder_scaled_z" type="cylinder" mesh="rectangle_z" rgba="1 0 1 0.3"/>
    </body>

    <body name="fitting_capsule_scaled_x" childclass="base" pos="6 0 6">
      <geom name="capsule_visual_scaled_x" class="visual" type="mesh" mesh="rectangle_x"/>
      <geom name="capsule_scaled_x" type="capsule" mesh="rectangle_x" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_capsule_scaled_y" childclass="base" pos="6 0 6">
      <geom name="capsule_visual_scaled_y" class="visual" type="mesh" mesh="rectangle_y"/>
      <geom name="capsule_scaled_y" type="capsule" mesh="rectangle_y" rgba="1 0 1 0.3"/>
    </body>
    <body name="fitting_capsule_scaled_z" childclass="base" pos="6 0 6">
      <geom name="capsule_visual_scaled_z" class="visual" type="mesh" mesh="rectangle_z"/>
      <geom name="capsule_scaled_z" type="capsule" mesh="rectangle_z" rgba="1 0 1 0.3"/>
    </body>
  </worldbody>
</mujoco>
